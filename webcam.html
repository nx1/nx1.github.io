<html>
<head>
  <title>Webcam</title>
</head>
<body>

<video id="webcam" width="640" height="480" autoplay></video>
<br>
<button id="capture">Capture</button>

<script>
  var webcam = document.getElementById('webcam');
  var capture = document.getElementById('capture');

  // check if the browser supports getUserMedia
  if (navigator.mediaDevices.getUserMedia) {
    // request access to the webcam
          navigator.mediaDevices.getUserMedia({video: {facingMode:"environment"}})
      .then(function (stream) {
        // set the source of the video to the webcam stream
        webcam.srcObject = stream;
      })
      .catch(function (err) {
        // handle error
        console.log("Error: " + err);
      });
  } else {
    console.log("getUserMedia not supported");
  }

  // add event listener to the capture button
  capture.addEventListener("click", function () {
    // create a canvas element
    var canvas = document.createElement("canvas");
    // set the canvas to the same size as the video
    canvas.width = webcam.videoWidth;
    canvas.height = webcam.videoHeight;
    // get the canvas context
    var ctx = canvas.getContext("2d");
    // draw the current frame of the video on the canvas
    ctx.drawImage(webcam, 0, 0, canvas.width, canvas.height);
    // create a link to download the image
    var link = document.createElement("a");
    link.download = "webcam.png";
    link.href = canvas.toDataURL();
    // trigger the download
    link.click();
  });
</script>

</body>
</html>
